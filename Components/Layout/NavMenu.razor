@using Microsoft.AspNetCore.Components.Routing

<div class="nav-container @(IsCollapsed ? "collapsed" : "expanded")">
    
    <div class="logo-section" @onclick="ToggleSidebar" title="Klik untuk Buka/Tutup">
        @if (IsCollapsed)
        {
             <img src="images/logo.png" alt="WM" class="logo-img-small" />
        }
        else
        {
             <img src="images/logo.png" alt="SHARP" class="logo-img-large" />
        }
    </div>

    <nav class="flex-column">
        
        <div class="nav-item">
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All" title="Home">
                <img src="images/side-icon/home.png" alt="Home" style="width: 24px; height: 24px;" />
                @if (!IsCollapsed) { <span class="link-text">Home</span> }
            </NavLink>
        </div>

        <div class="nav-item">
            <NavLink class="nav-link" href="Table" title="Summary">
                <img src="images/side-icon/table.png" alt="Summary" style="width: 24px; height: 24px;" />
                @if (!IsCollapsed) { <span class="link-text">Summary</span> }
            </NavLink>
        </div>

        <div class="nav-item">
            <NavLink class="nav-link" href="settings" title="Settings">
                <img src="images/side-icon/settings.png" alt="Settings" style="width: 24px; height: 24px;" />
                @if (!IsCollapsed) { <span class="link-text">Settings</span> }
            </NavLink>
        </div>

    </nav>
    
</div>

@inject IJSRuntime JSRuntime

@code {
    private bool IsCollapsed = true;

    private async Task ToggleSidebar()
    {
        IsCollapsed = !IsCollapsed;
        
        // Toggle class on dashboard carousel, navigation buttons, and indicators
        if (IsCollapsed)
        {
            await JSRuntime.InvokeVoidAsync("eval", @"
                document.querySelector('.dashboard-carousel')?.classList.remove('sidebar-expanded');
                document.querySelector('.carousel-nav.prev')?.classList.remove('sidebar-expanded');
                document.querySelector('.carousel-indicators')?.classList.remove('sidebar-expanded');
            ");
        }
        else
        {
            await JSRuntime.InvokeVoidAsync("eval", @"
                document.querySelector('.dashboard-carousel')?.classList.add('sidebar-expanded');
                document.querySelector('.carousel-nav.prev')?.classList.add('sidebar-expanded');
                document.querySelector('.carousel-indicators')?.classList.add('sidebar-expanded');
            ");
        }
    }
}